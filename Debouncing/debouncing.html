<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Debouncing - Fullstackgada Interactive Demo</title>
   <link rel="icon" type="image/png" href="/image/favicon.ico">
    <link rel="stylesheet" href="/interactive-demo.css" />
    <style>
        /* Additional styles specific to typing demo */
        .typing-input {
            width: 100%;
            padding: 0.6rem;
            font-size: 1rem;
            border: 2px solid #ccc;
            border-radius: 6px;
            margin: 0.5rem 0;
            box-sizing: border-box;
        }
        .search-results {
            margin-top: 1rem;
            background: #f0f4f8;
            padding: 1rem;
            border-radius: 6px;
            min-height: 80px;
            font-family: 'Courier New', Courier, monospace;
            white-space: pre-wrap;
            color: #333;
        }
    </style>
</head>
<body>
<div class="container">

    <!-- Header -->
     <div class="header-interactive" style="position:relative;">
        <h1>Debouncing ka Funda</h1>
        <p>Understand how Debouncing works with Fullstackgada</p>
       <div class="explore-diagrams-btn-wrapper">
            <a href="/interactive.html" class="explore-diagrams-btn">
                <img src="/image/plus-circle.svg" alt="Instagram icon"> More Diagrams
            </a>
        </div>
       <div class="follow-btn-wrapper">
            <a href="https://www.instagram.com/fullstackgada" target="_blank" class="follow-btn">
    <img src="/image/instagram.svg" alt="Instagram icon"> Follow for More
</a>
        </div>
    </div>

    <!-- Demo Grid -->
    <div class="demo-grid">

        <!-- Debouncing Concept Explanation -->
        <div class="demo-section">
            <h2 class="demo-title">‚è≥ Debouncing Kya Hai?</h2>
            <div class="explanation">
                <strong>Debouncing:</strong> Baar-baar hone wale events ko rok kar sirf last event ke baad function ko run karna.<br>
                Jaise Popatlal mithai tabhi baant-ta hai jab pura rishta confirm ho jaye!
            </div>

            <div class="saree-analogy">
                <h4>üç¨ Popatlal ka Sweet Debounce Analogy</h4>
                <div class="saree-step">
                    <div class="saree-emoji">üìû</div>
                    <div><strong>Fast-Fast Calls:</strong> Rishta aaya ‚Üí mithai baanto ‚Üí rishta toot gaya ‚Üí fir se drama!</div>
                </div>
                <div class="saree-step">
                    <div class="saree-emoji">‚è≥</div>
                    <div><strong>Debouncing:</strong> Thodi der ruk jao, agar rishta nahi toota toh mithai baanto!</div>
                </div>
                <div class="saree-step">
                    <div class="saree-emoji">üòå</div>
                    <div><strong>Result:</strong> Server confuse nahi hota, aur performance mast rehti hai!</div>
                </div>
            </div>

            <!-- Debounce Demo Controls -->
            <div class="demo-controls">
                <button class="demo-btn" onclick="demonstrateNoDebounceTyping()">
                    ‚å®Ô∏è Typing Search bina Debouncing ke
                </button>
                <button class="demo-btn clear-btn" onclick="clearDebounceDemo()">
                    üóëÔ∏è Demo Clear Karo
                </button>
            </div>

            <!-- Demo Results -->
            <div class="demo-area" id="debounceDemoArea">
                <div class="event-message one-message">
                    Upar ke buttons click karo to try typing search with/without debouncing!
                </div>
            </div>
        </div>

        <!-- Live Typing Simulator -->
        <div class="demo-section">
            <h2 class="demo-title">üéÆ Live Search Input Simulator</h2>
            <div class="explanation one-explanation">
                <strong>Demo:</strong> Niche box mein type karo aur dekho kaise debounced search server calls ko kam karta hai.
            </div>
            <input type="text" id="searchInput" class="typing-input" placeholder="Yahan search type karo..." autocomplete="off" />
            <div class="search-results" id="searchResults">Search results yahan dikhenge...</div>
            <div style="margin-top: 0.5rem;">
                <label for="debounceDelay">Debounce Delay (milliseconds): </label>
                <select id="debounceDelay" onchange="changeDebounceDelay()">
                    <option value="200">200 ms (Jaldi)</option>
                    <option value="500" selected>500 ms (Default)</option>
                    <option value="1000">1000 ms (Dheere)</option>
                    <option value="1500">1500 ms (Aur Dheere)</option>
                </select>
            </div>
            <div style="margin-top: 0.5rem;">
                <button id="clearLiveSearchBtn" class="demo-btn clear-btn">üóëÔ∏è Live Search Clear Karo</button>
            </div>
        </div>
    </div>

    <!-- Benefits & Best Practices -->
    <div class="comparison-section">
        <h3>üöÄ Debouncing ke Fayde</h3>
        <table class="comparison-table responsive-table">
            <thead>
                <tr>
                    <th>Aspect</th>
                    <th>Fayde</th>
                    <th>Kyun?</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>Server Load</strong></td>
                    <td>Requests ki sankhya kam hoti hai</td>
                    <td>Bina zarurat ke requests ko rokta hai</td>
                </tr>
                <tr>
                    <td><strong>Performance</strong></td>
                    <td>Webpage smooth chalta hai</td>
                    <td>Bar-bar ka kaam rukta hai, resources bachta hai</td>
                </tr>
                <tr>
                    <td><strong>User Experience</strong></td>
                    <td>Search sahi time pe chalta hai</td>
                    <td>Delay ke baad meaningful result dikhta hai</td>
                </tr>
                <tr>
                    <td><strong>Error Handling</strong></td>
                    <td>Load spikes se bachta hai</td>
                    <td>Kam time mein kam errors aate hain</td>
                </tr>
                <tr>
                    <td><strong>Implementation</strong></td>
                    <td>Callback management asaan ho jata hai</td>
                    <td>Events ke chaotic execution ko control karta hai</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<script>
    // Debounce function implementation
    function debounce(func, delay) {
        let timeoutId;
        return function (...args) {
            clearTimeout(timeoutId);
            timeoutId = setTimeout(() => {
                func.apply(this, args);
            }, delay);
        };
    }

    // Simulate search API call
    function fakeSearchApi(query) {
        return new Promise((resolve) => {
            setTimeout(() => {
                // fake search results based on query
                const results = query ? [`"${query}" ke liye result`, `"${query}" ke liye aur ek result`] : [];
                resolve(results);
            }, 500); // simulating 500ms API latency
        });
    }

    // Demonstrate typing search without debouncing
    function demonstrateNoDebounceTyping() {
        const demoArea = document.getElementById("debounceDemoArea");
        demoArea.innerHTML = `
            <div>
                <input type="text" id="noDebounceInput" class="typing-input" placeholder="Yahan type karo (bina debounce)..."/>
                <div class="search-results" id="noDebounceResults">Type karna shuru karo toh turant search results dekho...</div>
                <small style="color: #555;">Search function har keystroke pe chalta hai bina debounce ke.</small>
            </div>
        `;

        const input = document.getElementById("noDebounceInput");
        const resultsDiv = document.getElementById("noDebounceResults");

        function handleSearch() {
            const query = input.value.trim();
            resultsDiv.textContent = `Search kar raha hai: "${query}" ...`;
            fakeSearchApi(query).then((results) => {
                if (results.length === 0) {
                    resultsDiv.textContent = "Koi result nahi mila.";
                } else {
                    resultsDiv.textContent = results.join("\n");
                }
            });
        }

        input.addEventListener("input", handleSearch);
    }

    function clearDebounceDemo() {
        document.getElementById("debounceDemoArea").innerHTML = `
            <div class="event-message one-message">
                Upar ke buttons click karo to try typing search with/without debouncing!
            </div>
        `;
    }

    // Live Simulator debounce implementation
    let liveDebounceTimeout;
    let liveSearchCount = 0;
    const searchInput = document.getElementById("searchInput");
    const searchResults = document.getElementById("searchResults");
    const debounceDelaySelector = document.getElementById("debounceDelay");

    function handleLiveSearch() {
        clearTimeout(liveDebounceTimeout);
        liveDebounceTimeout = setTimeout(() => {
            const query = searchInput.value.trim();
            liveSearchCount++;
            searchResults.textContent = `Search kar raha hai: "${query}" (Search count: ${liveSearchCount}) ...`;
            fakeSearchApi(query).then((results) => {
                if (results.length === 0) {
                    searchResults.textContent = "Koi result nahi mila.";
                } else {
                    searchResults.textContent = results.join("\n");
                }
            });
        }, parseInt(debounceDelaySelector.value));
    }

    function changeDebounceDelay() {
        // Immediately clear any pending search and reset count for clarity
        clearTimeout(liveDebounceTimeout);
        liveSearchCount = 0;
        searchResults.textContent = "Debounce delay badal gaya, ab type karo...";
    }

    window.onload = () => {
        clearDebounceDemo();

        searchInput.addEventListener("input", handleLiveSearch);
        debounceDelaySelector.addEventListener("change", changeDebounceDelay);

        const clearBtn = document.getElementById("clearLiveSearchBtn");
        clearBtn?.addEventListener("click", () => {
            searchInput.value = "";
            searchResults.textContent = "Search results yahan dikhenge...";
            clearTimeout(liveDebounceTimeout);
            liveSearchCount = 0;
        });
    };
</script>
</body>
</html>