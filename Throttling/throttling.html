<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Throttling ka Funda - Fullstackgada ka Interactive Demo</title>
    <link rel="stylesheet" href="/interactive-demo.css">
</head>
<body>
    <div class="container">
        <div class="header-interactive" style="position:relative;">
            <h1>Throttling ka Funda</h1>
        <p>Understand how Throttling works with Fullstackgada</p>
            <div class="explore-diagrams-btn-wrapper">
            <a href="/interactive.html" class="explore-diagrams-btn">
                <img src="/image/plus-circle.svg" alt="Instagram icon"> More Diagrams
            </a>
        </div>
       <div class="follow-btn-wrapper">
            <a href="https://www.instagram.com/fullstackgada" target="_blank" class="follow-btn">
    <img src="/image/instagram.svg" alt="Instagram icon"> Follow for More
</a>
        </div>
        </div>
        <!-- Demo Grid -->
        <div class="demo-grid">
            <!-- Throttling Concept -->
            <div class="demo-section">
                <h2 class="demo-title">â±ï¸ Throttling Kya Hai?</h2>
                <div class="explanation">
                    <strong>Throttling:</strong> Function ko ek fixed time ke baad ek baar chalana.
                </div>
                <div class="saree-analogy">
                    <h4>ğŸ’¬ Iyer ki "Darling" Wali Baat</h4>
                    <div class="saree-step"><div class="saree-emoji">ğŸ—£ï¸</div> <div>Bina Throttling: "Darling" har 0.5s mein</div></div>
                    <div class="saree-step"><div class="saree-emoji">â±ï¸</div> <div>Throttling ke Saath: "Darling" har 5s mein</div></div>
                    <div class="saree-step"><div class="saree-emoji">ğŸ˜Œ</div> <div>Result: Babita ko sukun, message bhi milta hai</div></div>
                </div>
                <div class="demo-controls">
                    <button class="demo-btn first-btn" onclick="demonstrateIyerThrottling()">ğŸ’¬ Iyer ka Demo</button>
                    <button class="demo-btn" onclick="demonstrateScrollThrottling()">ğŸ“œ Scroll</button>
                    <button class="demo-btn" onclick="demonstrateResizeThrottling()">ğŸ“ Resize</button>
                    <button class="demo-btn clear-btn" onclick="clearThrottlingDemo()">ğŸ—‘ï¸ Clear Karo</button>
                </div>
                <div class="demo-area" id="throttlingResults">
                    <div class="event-message one-message">Throttling explore karne ke liye buttons dabao!</div>
                </div>
            </div>

            <!-- Live Simulator -->
            <div class="demo-section">
                <h2 class="demo-title">ğŸ® Live Throttling ka Khel</h2>
                <div class="explanation">Alag-alag throttling intervals ke saath experiment karo!</div>
                <div class="form-group">
                    <label>Interval:</label>
                    <select id="throttleInterval">
                        <option value="500">500ms</option>
                        <option value="1000" selected>1000ms</option>
                        <option value="2000">2000ms</option>
                        <option value="3000">3000ms</option>
                    </select>
                </div>
                <div class="demo-area" style="min-height: 120px; border: 2px dashed #ddd; padding: 1rem; margin: 1rem 0;">
                    <button class="demo-btn first-btn" onclick="rapidClickTest()" id="rapidClickBtn">ğŸ–±ï¸ Jaldi Jaldi Click Karo!</button>
                    <div style="margin-top: 1rem;"><small>Tez tez click karke throttling dekho!</small></div>
                </div>
                <div class="memory-diagram">
                    <div class="memory-slot"><div class="variable-name">Kul Clicks</div><div class="variable-value" id="totalClicks">0</div></div>
                    <div class="memory-slot"><div class="variable-name">Chalaye Gaye</div><div class="variable-value" id="functionExecutions">0</div></div>
                    <div class="memory-slot"><div class="variable-name">Throttle Rate</div><div class="variable-value" id="throttleRate">0%</div></div>
                    <div class="memory-slot"><div class="variable-name">Aakhri Baar Chala</div><div class="variable-value" id="lastExecution">Kabhi Nahi</div></div>
                </div>
                <button class="demo-btn clear-btn" onclick="resetStats()">ğŸ”„ Reset Karo</button>
            </div>
        </div>

        <!-- Scroll & Resize Demo -->
        <div class="demo-section" style="grid-column: 1 / -1;">
            <h2 class="demo-title">ğŸ“œ Scroll aur Resize Throttling</h2>
            <div class="tabs">
                <button class="tab active" onclick="showThrottlingDemo('scroll-demo')">ğŸ“œ Scroll</button>
                <button class="tab" onclick="showThrottlingDemo('resize-demo')">ğŸ“ Resize</button>
                <button class="tab" onclick="showThrottlingDemo('comparison-demo')">âš–ï¸ Tulna</button>
            </div>
            <div id="scroll-demo" class="tab-content active">
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                    <div>
                        <h4>ğŸš« Bina Throttling</h4>
                        <div class="demo-area" style="height: 200px; overflow-y: scroll; border: 2px solid #f56565;" id="scrollWithoutThrottle">
                            <div style="height: 800px; padding: 1rem;">
                                <p>Bina throttling ke scroll karo!</p>
                                <div id="scrollCountWithout">Scroll events: 0</div>
                                <div>Performance: ğŸ˜µ Heavy Load</div>
                            </div>
                        </div>
                    </div>
                    <div>
                        <h4>âœ… Throttling ke Saath (250ms)</h4>
                        <div class="demo-area" style="height: 200px; overflow-y: scroll; border: 2px solid #4caf50;" id="scrollWithThrottle">
                            <div style="height: 800px; padding: 1rem;">
                                <p>Throttling ke saath scroll karo!</p>
                                <div id="scrollCountWith">Scroll events: 0</div>
                                <div>Performance: ğŸ˜Š Smooth Hai</div>
                            </div>
                        </div>
                    </div>
                </div>
                <button class="demo-btn first-btn" onclick="resetScrollCounters()">ğŸ”„ Reset Karo</button>
            </div>
            <div id="resize-demo" class="tab-content">
                <div class="code-container">
                    <div class="code-block">
                        <div class="code-line comment">// ğŸ“ Resize Throttling</div>
                        <div class="code-line var-declaration">let resizeCount = 0;</div>
                        <div class="code-line var-declaration">let throttledResizeCount = 0;</div>
                        <div class="code-line var-usage">window.addEventListener('resize', () => {</div>
                        <div class="code-line var-usage">  resizeCount++;</div>
                        <div class="code-line var-usage">  console.log('Resize:', resizeCount);</div>
                        <div class="code-line var-usage">});</div>
                        <div class="code-line var-usage">window.addEventListener('resize', throttle(() => {</div>
                        <div class="code-line var-usage">  throttledResizeCount++;</div>
                        <div class="code-line var-usage">  console.log('Throttled Resize:', throttledResizeCount);</div>
                        <div class="code-line var-usage">}, 500));</div>
                    </div>
                </div>
                <div class="demo-area">
                    <div class="event-message one-message">
                        <strong>ğŸ’¡ Resize Demo:</strong><br>
                        Browser ka size change karke farak dekho!<br>
                        <strong>Window ka Size:</strong> <span id="windowSize">Loading...</span><br>
                        <strong>Resize Events:</strong> <span id="resizeEvents">0</span><br>
                        <strong>Throttled Events:</strong> <span id="throttledResizeEvents">0</span>
                    </div>
                </div>
            </div>
            <div id="comparison-demo" class="tab-content">
                <table class="comparison-table responsive-table">
                    <thead>
                        <tr><th>Scene</th><th>ğŸš« Bina Throttling</th><th>âœ… Throttling ke Saath</th><th>Improvement</th></tr>
                    </thead>
                    <tbody>
                        <tr><td>ğŸ–±ï¸ Tez Clicking</td><td>100 calls</td><td>10 calls (1000ms)</td><td>90% kam</td></tr>
                        <tr><td>ğŸ“œ Scroll</td><td>1000+ events/sec</td><td>4 events/sec (250ms)</td><td>99.6% kam</td></tr>
                        <tr><td>ğŸ“ Resize</td><td>500+ events</td><td>2 events/sec (500ms)</td><td>99.2% kam</td></tr>
                        <tr><td>ğŸ¯ API Calls</td><td>Multiple requests</td><td>Controlled frequency</td><td>Overload se bacha</td></tr>
                    </tbody>
                </table>
            </div>
        </div>
        <!-- Throttling vs Debouncing -->
        <div class="demo-section" style="grid-column: 1 / -1;">
            <h2 class="demo-title">âš–ï¸ Throttling vs Debouncing</h2>
            <div class="explanation">Debouncing: "Rukne pe kaam karo" | Throttling: "Har thodi der mein kaam karo"</div>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
                <div class="demo-card">
                    <h3>ğŸ›‘ Debouncing</h3>
                    <div class="saree-analogy">
                        <div class="saree-step"><div class="saree-emoji">âŒ¨ï¸</div><div>Search mein typing</div></div>
                        <div class="saree-step"><div class="saree-emoji">â¸ï¸</div><div>Rukne ka wait karta hai</div></div>
                        <div class="saree-step"><div class="saree-emoji">ğŸ”</div><div>Rukne ke baad search</div></div>
                    </div>
                    <button class="demo-btn first-btn" onclick="testDebouncing()">ğŸ›‘ Test Karo</button>
                    <div id="debounceResult" class="result-panel"><div class="result-content">Debouncing test karne ke liye click karo...</div></div>
                </div>
                <div class="demo-card">
                    <h3>â±ï¸ Throttling</h3>
                    <div class="saree-analogy">
                        <div class="saree-step"><div class="saree-emoji">ğŸ“œ</div><div>Scroll events</div></div>
                        <div class="saree-step"><div class="saree-emoji">ğŸ•</div><div>Fixed intervals mein</div></div>
                        <div class="saree-step"><div class="saree-emoji">âš¡</div><div>Regular updates</div></div>
                    </div>
                    <button class="demo-btn first-btn" onclick="testThrottling()">â±ï¸ Test Karo</button>
                    <div id="throttleResult" class="result-panel"><div class="result-content">Throttling test karne ke liye click karo...</div></div>
                </div>
            </div>
        </div>

        <!-- Performance Benefits -->
        <div class="comparison-section">
            <h3>ğŸš€ Throttling ke Fayde</h3>
            <table class="comparison-table responsive-table">
                <thead>
                    <tr><th>Use Case</th><th>Problem</th><th>Solution</th><th>Fayda</th></tr>
                </thead>
                <tbody>
                    <tr><td>ğŸ“œ Infinite Scroll</td><td>1000+ events/sec</td><td>4 events/sec (250ms)</td><td>99.6% load kam</td></tr>
                    <tr><td>ğŸ” Search</td><td>Har keystroke pe API call</td><td>3 calls/sec (300ms)</td><td>Server load kam</td></tr>
                    <tr><td>ğŸ“ Resize</td><td>Har pixel pe calculation</td><td>Har 500ms mein</td><td>Smooth resizing</td></tr>
                    <tr><td>ğŸ–±ï¸ Mouse Tracking</td><td>1000+ events/sec</td><td>20fps (50ms)</td><td>95% load kam</td></tr>
                </tbody>
            </table>
        </div>
    </div>

    <script>
        let totalClicks = 0, functionExecutions = 0, scrollWithoutCount = 0, scrollWithCount = 0, resizeEventCount = 0, throttledResizeEventCount = 0;

        // Throttle function
        function throttle(func, delay) {
            let lastExecuted = 0;
            return function(...args) {
                const now = Date.now();
                if (now - lastExecuted >= delay) {
                    func.apply(this, args);
                    lastExecuted = now;
                }
            };
        }

        // Throttled handlers
        const throttledScrollHandler = throttle(() => {
            scrollWithCount++;
            document.getElementById('scrollCountWith').textContent = `Scroll events: ${scrollWithCount}`;
        }, 250);
        const throttledResizeHandler = throttle(() => {
            throttledResizeEventCount++;
            document.getElementById('throttledResizeEvents').textContent = throttledResizeEventCount;
            updateWindowSize();
        }, 500);

        // Demo functions
        function demonstrateIyerThrottling() {
            const result = document.getElementById('throttlingResults');
            let darlingCount = 0;
            result.innerHTML = `<div class="success-message"><strong>ğŸ’¬ Iyer ka Demo</strong><br><div id="darlingOutput">Simulation Chal Raha Hai...</div><div class="message-time">${new Date().toLocaleTimeString()}</div></div>`;
            const throttledDarling = throttle(() => {
                darlingCount++;
                const output = document.getElementById('darlingOutput');
                output.innerHTML += `<div style="color: #4caf50;">âœ… "Babita Darling!" (${darlingCount})</div>`;
            }, 5000);
            let attempts = 0;
            const interval = setInterval(() => {
                attempts++;
                throttledDarling();
                const output = document.getElementById('darlingOutput');
                if (attempts <= 20) {
                    if (attempts % 10 === 1) output.innerHTML += `<div style="color: #f56565;">âŒ Attempt ${attempts} block ho gaya</div>`;
                } else {
                    clearInterval(interval);
                    output.innerHTML += `<br><strong>Result:</strong> ${attempts} koshish, ${darlingCount} baar chala`;
                }
            }, 500);
        }

        function demonstrateScrollThrottling() {
            document.getElementById('throttlingResults').innerHTML = `
                <div class="success-message">
                    <strong>ğŸ“œ Scroll Throttling</strong><br>
                    Bina Throttling: 1000+ events/sec<br>
                    Throttling ke Saath (250ms): 4 events/sec<br>
                    Uses: Infinite scroll, parallax<br>
                    Fayda: 99.6% kam calls
                    <div class="message-time">${new Date().toLocaleTimeString()}</div>
                </div>`;
        }

        function demonstrateResizeThrottling() {
            document.getElementById('throttlingResults').innerHTML = `
                <div class="success-message">
                    <strong>ğŸ“ Resize Throttling</strong><br>
                    Uses: Layout, charts, modals<br>
                    Bina Throttling: 500+ events<br>
                    Throttling ke Saath (500ms): 2 events/sec<br>
                    Fayda: 99.2% kam calculations
                    <div class="message-time">${new Date().toLocaleTimeString()}</div>
                </div>`;
        }

        function clearThrottlingDemo() {
            document.getElementById('throttlingResults').innerHTML = `<div class="event-message one-message">Throttling explore karne ke liye buttons dabao!</div>`;
        }

        function rapidClickTest() {
            totalClicks++;
            document.getElementById('totalClicks').textContent = totalClicks;
            const interval = parseInt(document.getElementById('throttleInterval').value);
            throttledExecution(interval);
            document.getElementById('throttleRate').textContent = totalClicks > 0 ? ((functionExecutions / totalClicks) * 100).toFixed(1) + '%' : '0%';
        }

        const throttledExecution = throttle(interval => {
            functionExecutions++;
            document.getElementById('functionExecutions').textContent = functionExecutions;
            document.getElementById('lastExecution').textContent = new Date().toLocaleTimeString();
            document.getElementById('throttleRate').textContent = totalClicks > 0 ? ((functionExecutions / totalClicks) * 100).toFixed(1) + '%' : '0%';
        }, 1000);

        function resetStats() {
            totalClicks = functionExecutions = 0;
            document.getElementById('totalClicks').textContent = '0';
            document.getElementById('functionExecutions').textContent = '0';
            document.getElementById('throttleRate').textContent = '0%';
            document.getElementById('lastExecution').textContent = 'Kabhi Nahi';
        }

        function setupScrollEvents() {
            document.getElementById('scrollWithoutThrottle').addEventListener('scroll', () => {
                scrollWithoutCount++;
                document.getElementById('scrollCountWithout').textContent = `Scroll events: ${scrollWithoutCount}`;
            });
            document.getElementById('scrollWithThrottle').addEventListener('scroll', throttledScrollHandler);
        }

        function resetScrollCounters() {
            scrollWithoutCount = scrollWithCount = 0;
            document.getElementById('scrollCountWithout').textContent = 'Scroll events: 0';
            document.getElementById('scrollCountWith').textContent = 'Scroll events: 0';
        }

        function setupResizeEvents() {
            window.addEventListener('resize', () => {
                resizeEventCount++;
                document.getElementById('resizeEvents').textContent = resizeEventCount;
                updateWindowSize();
            });
            window.addEventListener('resize', throttledResizeHandler);
            updateWindowSize();
        }

        function updateWindowSize() {
            document.getElementById('windowSize').textContent = `${window.innerWidth} Ã— ${window.innerHeight}`;
        }

        function showThrottlingDemo(demo) {
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.getElementById(demo).classList.add('active');
            event.target.classList.add('active');
        }

        function testDebouncing() {
            const result = document.getElementById('debounceResult');
            let attempts = 0, executed = false;
            const debounce = (func, delay) => {
                let timeoutId;
                return (...args) => {
                    clearTimeout(timeoutId);
                    timeoutId = setTimeout(() => func.apply(this, args), delay);
                };
            };
            const debouncedFunction = debounce(() => {
                executed = true;
                result.innerHTML = `<div class="success-message">ğŸ›‘ Debouncing: ${attempts} koshish, 1 execution rukne ke baad</div>`;
            }, 2000);
            result.innerHTML = `<div class="event-message">ğŸ”„ Tez tez calls simulate ho rahe hain...</div>`;
            const interval = setInterval(() => {
                attempts++;
                debouncedFunction();
                if (attempts >= 10) {
                    clearInterval(interval);
                    if (!executed) setTimeout(() => {
                        if (!executed) result.innerHTML = `<div class="success-message">ğŸ›‘ Debouncing: ${attempts} koshish, 1 execution rukne ke baad</div>`;
                    }, 2100);
                }
            }, 300);
        }

        function testThrottling() {
            const result = document.getElementById('throttleResult');
            let attempts = 0, executions = 0;
            const throttledFunction = throttle(() => {
                executions++;
                result.innerHTML = `<div class="success-message">â±ï¸ Throttling: ${attempts} koshish, ${executions} executions</div>`;
            }, 1000);
            result.innerHTML = `<div class="event-message">ğŸ”„ Tez tez calls simulate ho rahe hain...</div>`;
            const interval = setInterval(() => {
                attempts++;
                throttledFunction();
                if (attempts >= 15) {
                    clearInterval(interval);
                    result.innerHTML = `<div class="success-message">â±ï¸ Throttling: ${attempts} koshish, ${executions} executions, Rate: ${((executions/attempts)*100).toFixed(1)}%</div>`;
                }
            }, 200);
        }

        function testBasicThrottle() {
            document.getElementById('basicThrottleResult').innerHTML = `
                <div class="success-message">
                    <strong>ğŸ”§ Basic Throttle Test:</strong><br>
                    10 tez calls:<br>
                    Call 1, 5, 10 execute hue<br>
                    70% calls mein kami
                </div>`;
        }

        function testAdvancedThrottle() {
            document.getElementById('advancedThrottleResult').innerHTML = `
                <div class="success-message">
                    <strong>âš¡ Advanced Throttle:</strong><br>
                    Leading: Pehla call turant<br>
                    Trailing: Aakhri call delay ke saath<br>
                    Dono: Turant + delay wala execution
                </div>`;
        }

        function testRealExamples() {
            document.getElementById('realExamplesResult').innerHTML = `
                <div class="success-message">
                    <strong>ğŸŒ Examples:</strong><br>
                    Navbar: 100ms, smooth animation<br>
                    Search API: 500ms, kam server load<br>
                    Mouse: 50ms, smooth tracking
                </div>`;
        }

        window.onload = () => {
            clearThrottlingDemo();
            setupScrollEvents();
            setupResizeEvents();
            resetStats();
        };
    </script>
</body>
</html>