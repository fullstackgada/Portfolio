<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Deadlock Interactive Demo | Fullstackgada</title>
  <meta name="description" content="Explore Deadlock with an interactive demo! Learn about the four Coffman conditions, prevention techniques, and real-world programming examples.">
  <meta name="author" content="Fullstackgada">
  <meta name="robots" content="index, follow">

  <!-- Canonical -->
  <link rel="canonical" href="https://fullstackgada.netlify.app/database/deadlock">

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="/image/favicon.ico">

  <!-- Styles -->
  <link rel="stylesheet" href="/interactive-demo.css">
  <link rel="preload" href="/interactive-demo.css" as="style">

  <!-- Open Graph Tags -->
  <meta property="og:title" content="Deadlock Interactive Demo | Fullstackgada">
  <meta property="og:description" content="Discover Deadlock with an interactive demo! Learn the four Coffman conditions, prevention techniques, and real-world examples in programming.">
  <meta property="og:url" content="https://fullstackgada.netlify.app/database/deadlock">
  <meta property="og:type" content="article">
  <meta property="og:image" content="https://fullstackgada.netlify.app/database/images/deadlock.webp">

  <!-- Twitter Card Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Deadlock Interactive Demo | Fullstackgada">
  <meta name="twitter:description" content="Learn Deadlock with an interactive demo, covering the four Coffman conditions and prevention techniques.">
  <meta name="twitter:image" content="https://fullstackgada.netlify.app/database/images/deadlock.webp">

  <!-- Article Schema Markup -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Article",
    "headline": "Deadlock Interactive Demo",
    "description": "Explore Deadlock with an interactive demo, covering the four Coffman conditions, prevention techniques, and real-world programming examples.",
    "author": {
      "@type": "Person",
      "name": "Fullstackgada"
    },
    "url": "https://fullstackgada.netlify.app/database/deadlock",
    "datePublished": "2025-09-13",
    "dateModified": "2025-09-13",
    "publisher": {
      "@type": "Organization",
      "name": "Fullstackgada",
      "logo": {
        "@type": "ImageObject",
        "url": "https://fullstackgada.netlify.app/image/favicon.ico"
      }
    }
  }
  </script>

  <!-- FAQ Schema Markup -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "FAQPage",
    "mainEntity": [
      {
        "@type": "Question",
        "name": "What is a Deadlock in programming?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "A deadlock occurs when two or more processes are blocked forever, waiting for resources held by each other. It is a serious issue in concurrent programming and operating systems."
        }
      },
      {
        "@type": "Question",
        "name": "What are the Coffman conditions for Deadlock?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "The four Coffman conditions are: Mutual Exclusion, Hold and Wait, No Preemption, and Circular Wait. If all these conditions hold simultaneously, a deadlock can occur."
        }
      },
      {
        "@type": "Question",
        "name": "How can Deadlocks be prevented?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Deadlocks can be prevented by breaking at least one of the Coffman conditions. Techniques include avoiding hold-and-wait, allowing preemption, ordering resource allocation, and using deadlock detection with recovery."
        }
      },
      {
        "@type": "Question",
        "name": "What are real-world examples of Deadlock?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Examples include two database transactions waiting for each other‚Äôs locks, or two threads holding resources while waiting for each other to release them. Such scenarios lead to a system freeze."
        }
      }
    ]
  }
  </script>
</head>

<body>
<div class="container">
    <!-- Header -->
    <div class="header-interactive" style="position:relative;">
        <h1>Deadlock Interactive Demo</h1>
        <p>Master Deadlock concepts with FullstackGada! üîí</p>
        <div class="explore-diagrams-btn-wrapper">
            <a href="/interactive.html" class="explore-diagrams-btn">
                <img src="/image/plus-circle.svg" alt="Explore more diagrams"> More Diagrams
            </a>
        </div>
        <div class="follow-btn-wrapper">
            <a href="https://www.instagram.com/fullstackgada" target="_blank" class="follow-btn">
                <img src="/image/instagram.svg" alt="Instagram icon"> Follow for More
            </a>
        </div>
    </div>

    <!-- Demo Grid -->
    <div class="demo-grid">
        <!-- Deadlock Concept Explanation -->
        <div class="demo-section">
            <h2 class="demo-title">üîí What is a Deadlock?</h2>
            <div class="explanation">
                <strong>Deadlock:</strong> When two or more processes get stuck waiting for each other, unable to proceed or release resources!
            </div>

            <!-- Analogy -->
            <div class="saree-analogy">
                <h4>üíï Love Triangle Analogy</h4>
                <div class="saree-step">
                    <div class="saree-emoji">üë®</div>
                    <div><strong>Person A:</strong> Holds Resource B, wants Resource A.</div>
                </div>
                <div class="saree-step">
                    <div class="saree-emoji">üë®‚Äçü¶≤</div>
                    <div><strong>Person B:</strong> Holds Resource A, wants another resource.</div>
                </div>
                <div class="saree-step">
                    <div class="saree-emoji">üë©</div>
                    <div><strong>Resource A:</strong> Waiting for Person A, held by Person B.</div>
                </div>
                <div class="saree-step">
                    <div class="saree-emoji">üîÑ</div>
                    <div><strong>Result:</strong> Circular wait‚Äînobody lets go!</div>
                </div>
            </div>

            <!-- Deadlock Demo Controls -->
            <div class="demo-controls">
                <button class="demo-btn first-btn" onclick="demonstrateDeadlock()">üîí Deadlock Demo</button>
                <button class="demo-btn" onclick="demonstrateFourConditions()">4Ô∏è‚É£ Four Conditions</button>
                <button class="demo-btn" onclick="demonstratePrevention()">üõ°Ô∏è Prevention Techniques</button>
                <button class="demo-btn clear-btn" onclick="clearDeadlockDemo()">üóëÔ∏è Clear</button>
            </div>

            <!-- Demo Results -->
            <div class="demo-area" id="deadlockResults">
                <div class="event-message one-message">
                    Click the buttons above to explore Deadlock concepts!
                </div>
            </div>
        </div>

        <!-- Live Deadlock Simulator -->
        <div class="demo-section">
            <h2 class="demo-title">üéÆ Live Deadlock Simulator</h2>
            <div class="explanation one-explanation">
                <strong>Scenario:</strong> Two processes fight for resources!
            </div>

            <!-- Process Status Display -->
            <div class="memory-diagram" id="processStatus">
                <div class="memory-slot" id="process1">
                    <div class="variable-name">üîµ Process 1</div>
                    <div class="variable-value">Status: Ready</div>
                </div>
                <div class="memory-slot" id="process2">
                    <div class="variable-name">üî¥ Process 2</div>
                    <div class="variable-value">Status: Ready</div>
                </div>
                <div class="memory-slot" id="resource1">
                    <div class="variable-name">üíé Resource A</div>
                    <div class="variable-value">Owner: None</div>
                </div>
                <div class="memory-slot" id="resource2">
                    <div class="variable-name">üíç Resource B</div>
                    <div class="variable-value">Owner: None</div>
                </div>
            </div>

            <!-- Simulation Controls -->
            <div class="demo-controls">
                <button class="demo-btn first-btn" onclick="startDeadlockSimulation()" id="simulationBtn">üöÄ Start Deadlock Simulation</button>
                <button class="demo-btn" onclick="resolveDeadlock()" id="resolveBtn" disabled>üîß Resolve Deadlock</button>
                <button class="demo-btn clear-btn" onclick="resetSimulation()">üîÑ Reset</button>
            </div>

            <!-- Simulation Log -->
            <div class="server-simulation">
                <h4>Simulation Log:</h4>
                <div class="server-log" id="simulationLog">
                    Ready to simulate deadlock...
                </div>
            </div>
        </div>
    </div>

    <!-- Four Conditions Deep Dive -->
    <div class="demo-section" style="grid-column: 1 / -1;">
        <h2 class="demo-title">4Ô∏è‚É£ Four Conditions of Deadlock</h2>
        <div class="explanation">
            <strong>Coffman Conditions:</strong> All four conditions must be met for a deadlock to occur!
        </div>

        <div class="tabs">
            <button class="tab active" onclick="showCondition('mutual-exclusion')">üîê Mutual Exclusion</button>
            <button class="tab" onclick="showCondition('hold-and-wait')">‚è≥ Hold and Wait</button>
            <button class="tab" onclick="showCondition('no-preemption')">üö´ No Preemption</button>
            <button class="tab" onclick="showCondition('circular-wait')">üîÑ Circular Wait</button>
        </div>

        <!-- Mutual Exclusion -->
        <div id="mutual-exclusion" class="tab-content active">
            <div class="code-container">
                <div class="code-block">
                    <div class="code-line comment">// üîê Mutual Exclusion Condition</div>
                    <div class="code-line comment">// A resource can only be used by one process at a time</div>
                    <div class="code-line"></div>
                    <div class="code-line var-declaration">Resource resourceA = new Resource("Resource A");</div>
                    <div class="code-line var-usage">resourceA.setExclusive(true); // Only one can access</div>
                    <div class="code-line"></div>
                    <div class="code-line comment">// Process 1 tries to access</div>
                    <div class="code-line var-usage">if(resourceA.isAvailable()) {</div>
                    <div class="code-line var-usage">  resourceA.lockBy("Process 1");</div>
                    <div class="code-line var-usage">  System.out.println("Process 1 locked Resource A!");</div>
                    <div class="code-line var-usage">}</div>
                    <div class="code-line"></div>
                    <div class="code-line comment">// Process 2 tries to access same resource</div>
                    <div class="code-line var-usage">if(resourceA.isAvailable()) {</div>
                    <div class="code-line var-usage">  System.out.println("Process 2: Resource A not available! üò¢");</div>
                    <div class="code-line var-usage">  // Will have to wait...</div>
                    <div class="code-line var-usage">}</div>
                </div>
            </div>
            <div class="saree-analogy">
                <h4>üîê Mutual Exclusion Examples:</h4>
                <div class="saree-step">
                    <div class="saree-emoji">üë©</div>
                    <div><strong>Person A:</strong> Only one person can talk to her at a time.</div>
                </div>
                <div class="saree-step">
                    <div class="saree-emoji">üñ®Ô∏è</div>
                    <div><strong>Printer:</strong> Only one document can print at a time.</div>
                </div>
                <div class="saree-step">
                    <div class="saree-emoji">üíæ</div>
                    <div><strong>Database Lock:</strong> Only one transaction can modify a record.</div>
                </div>
            </div>
            <button class="demo-btn first-btn" onclick="testMutualExclusion()">üîê Test Mutual Exclusion</button>
            <div id="mutualExclusionResult" class="result-panel" style="margin-top: 1rem;">
                <div class="result-content">Click to test mutual exclusion condition...</div>
            </div>
        </div>

        <!-- Hold and Wait -->
        <div id="hold-and-wait" class="tab-content">
            <div class="code-container">
                <div class="code-block">
                    <div class="code-line comment">// ‚è≥ Hold and Wait Condition</div>
                    <div class="code-line comment">// A process holds resources while waiting for others</div>
                    <div class="code-line"></div>
                    <div class="code-line var-declaration">class Process {</div>
                    <div class="code-line var-usage">  List<Resource> heldResources = new ArrayList<>();</div>
                    <div class="code-line var-usage">  List<Resource> waitingFor = new ArrayList<>();</div>
                    <div class="code-line"></div>
                    <div class="code-line var-usage">  public void executeProcess1() {</div>
                    <div class="code-line var-usage">    // Process 1 holds Resource B</div>
                    <div class="code-line var-usage">    heldResources.add(new Resource("Resource B"));</div>
                    <div class="code-line var-usage">    System.out.println("Process 1: Holding Resource B!");</div>
                    <div class="code-line"></div>
                    <div class="code-line var-usage">    // Wants Resource A too</div>
                    <div class="code-line var-usage">    waitingFor.add(new Resource("Resource A"));</div>
                    <div class="code-line var-usage">    System.out.println("Process 1: Waiting for Resource A!");</div>
                    <div class="code-line var-usage">  }</div>
                    <div class="code-line var-declaration">}</div>
                    <div class="code-line"></div>
                    <div class="code-line comment">// Process 2 holds Resource A, wants another resource</div>
                    <div class="code-line var-usage">process2.hold("Resource A");</div>
                    <div class="code-line var-usage">process2.waitFor("Other Resource");</div>
                </div>
            </div>
            <div class="saree-analogy">
                <h4>‚è≥ Hold and Wait Examples:</h4>
                <div class="saree-step">
                    <div class="saree-emoji">üë®</div>
                    <div><strong>Process 1:</strong> Holds Resource B, waits for Resource A.</div>
                </div>
                <div class="saree-step">
                    <div class="saree-emoji">üë®‚Äçü¶≤</div>
                    <div><strong>Process 2:</strong> Holds Resource A, waits for another resource.</div>
                </div>
                <div class="saree-step">
                    <div class="saree-emoji">üíª</div>
                    <div><strong>Database:</strong> Locks Table A, waits for Table B.</div>
                </div>
            </div>
            <button class="demo-btn first-btn" onclick="testHoldAndWait()">‚è≥ Test Hold and Wait</button>
            <div id="holdAndWaitResult" class="result-panel" style="margin-top: 1rem;">
                <div class="result-content">Click to test hold and wait condition...</div>
            </div>
        </div>

        <!-- No Preemption -->
        <div id="no-preemption" class="tab-content">
            <div class="code-container">
                <div class="code-block">
                    <div class="code-line comment">// üö´ No Preemption Condition</div>
                    <div class="code-line comment">// Resources cannot be forcefully taken</div>
                    <div class="code-line"></div>
                    <div class="code-line var-declaration">class Resource {</div>
                    <div class="code-line var-usage">  private String owner;</div>
                    <div class="code-line var-usage">  private boolean canPreempt = false;</div>
                    <div class="code-line"></div>
                    <div class="code-line var-usage">  public boolean forceRelease(String newOwner) {</div>
                    <div class="code-line var-usage">    if(!canPreempt) {</div>
                    <div class="code-line var-usage">      System.out.println(owner + " says: I'll release it myself!");</div>
                    <div class="code-line var-usage">      return false; // Cannot preempt</div>
                    <div class="code-line var-usage">    }</div>
                    <div class="code-line var-usage">    return true;</div>
                    <div class="code-line var-usage">  }</div>
                    <div class="code-line var-declaration">}</div>
                    <div class="code-line"></div>
                    <div class="code-line comment">// Example usage</div>
                    <div class="code-line var-usage">Resource resourceA = new Resource("Resource A");</div>
                    <div class="code-line var-usage">resourceA.lockBy("Process 2");</div>
                    <div class="code-line"></div>
                    <div class="code-line var-usage">// Process 1 tries to preempt</div>
                    <div class="code-line var-usage">if(!resourceA.forceRelease("Process 1")) {</div>
                    <div class="code-line var-usage">  System.out.println("Process 1: Must wait for Process 2 to release!");</div>
                    <div class="code-line var-usage">}</div>
                </div>
            </div>
            <div class="saree-analogy">
                <h4>üö´ No Preemption Examples:</h4>
                <div class="saree-step">
                    <div class="saree-emoji">üë®‚Äçü¶≤</div>
                    <div><strong>Process 2:</strong> "Resource A is mine, no one can take it!"</div>
                </div>
                <div class="saree-step">
                    <div class="saree-emoji">üñ®Ô∏è</div>
                    <div><strong>Printer:</strong> Document printing cannot be interrupted.</div>
                </div>
                <div class="saree-step">
                    <div class="saree-emoji">üíæ</div>
                    <div><strong>File Lock:</strong> Process must release it; OS can't force it.</div>
                </div>
            </div>
            <button class="demo-btn first-btn" onclick="testNoPreemption()">üö´ Test No Preemption</button>
            <div id="noPreemptionResult" class="result-panel" style="margin-top: 1rem;">
                <div class="result-content">Click to test no preemption condition...</div>
            </div>
        </div>

        <!-- Circular Wait -->
        <div id="circular-wait" class="tab-content">
            <div class="code-container">
                <div class="code-block">
                    <div class="code-line comment">// üîÑ Circular Wait Condition</div>
                    <div class="code-line comment">// Processes form a circular chain of waiting</div>
                    <div class="code-line"></div>
                    <div class="code-line var-declaration">// Circular dependency chain</div>
                    <div class="code-line var-usage">Process process1 = new Process("Process 1");</div>
                    <div class="code-line var-usage">Process process2 = new Process("Process 2");</div>
                    <div class="code-line var-usage">Process process3 = new Process("Process 3");</div>
                    <div class="code-line"></div>
                    <div class="code-line var-usage">// Process 1 holds Resource B, wants Resource A</div>
                    <div class="code-line var-usage">process1.hold("Resource B");</div>
                    <div class="code-line var-usage">process1.waitFor("Resource A"); // Held by Process 2</div>
                    <div class="code-line"></div>
                    <div class="code-line var-usage">// Process 2 holds Resource A, wants Resource C</div>
                    <div class="code-line var-usage">process2.hold("Resource A");</div>
                    <div class="code-line var-usage">process2.waitFor("Resource C"); // Held by Process 3</div>
                    <div class="code-line"></div>
                    <div class="code-line var-usage">// Process 3 holds Resource C, wants Resource B</div>
                    <div class="code-line var-usage">process3.hold("Resource C");</div>
                    <div class="code-line var-usage">process3.waitFor("Resource B"); // Back to Process 1!</div>
                    <div class="code-line"></div>
                    <div class="code-line comment">// Result: Circular wait - nobody moves!</div>
                    <div class="code-line comment">// Process 1 -> Process 2 -> Process 3 -> Process 1 (cycle!)</div>
                </div>
            </div>
            <div class="saree-analogy">
                <h4>üîÑ Circular Wait Examples:</h4>
                <div class="saree-step">
                    <div class="saree-emoji">üë®‚û°Ô∏èüíé</div>
                    <div><strong>Process 1:</strong> Holds Resource B, wants Resource A (held by Process 2).</div>
                </div>
                <div class="saree-step">
                    <div class="saree-emoji">üë®‚Äçü¶≤‚û°Ô∏èüíç</div>
                    <div><strong>Process 2:</strong> Holds Resource A, wants Resource C (held by Process 3).</div>
                </div>
                <div class="saree-step">
                    <div class="saree-emoji">üë®‚Äçüíº‚û°Ô∏èüíé</div>
                    <div><strong>Process 3:</strong> Holds Resource C, wants Resource B (held by Process 1).</div>
                </div>
                <div class="saree-step">
                    <div class="saree-emoji">üîÑ</div>
                    <div><strong>Circle Complete:</strong> Infinite loop of waiting!</div>
                </div>
            </div>
            <button class="demo-btn first-btn" onclick="testCircularWait()">üîÑ Test Circular Wait</button>
            <div id="circularWaitResult" class="result-panel" style="margin-top: 1rem;">
                <div class="result-content">Click to test circular wait condition...</div>
            </div>
        </div>
    </div>

    <!-- Prevention Techniques -->
    <div class="demo-section" style="grid-column: 1 / -1;">
        <h2 class="demo-title">üõ°Ô∏è Deadlock Prevention Techniques</h2>
        <div class="explanation">
            <strong>Prevention Strategy:</strong> Break one of the four conditions to avoid deadlock!
        </div>
        <table class="comparison-table responsive-table">
            <thead>
                <tr>
                    <th>Technique</th>
                    <th>How It Works</th>
                    <th>Real-World Example</th>
                    <th>Pros/Cons</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>üîë Resource Ordering</strong></td>
                    <td>Allocate resources in a fixed order.</td>
                    <td>Always lock Resource B before Resource A.</td>
                    <td>‚úÖ Simple | ‚ùå Restrictive</td>
                </tr>
                <tr>
                    <td><strong>‚è∞ Timeout</strong></td>
                    <td>Cancel the process if it waits too long.</td>
                    <td>Wait 5 minutes, then abort the transaction.</td>
                    <td>‚úÖ Practical | ‚ùå May lose work</td>
                </tr>
                <tr>
                    <td><strong>‚ö° Short Transactions</strong></td>
                    <td>Complete tasks quickly to reduce lock time.</td>
                    <td>Lock resource briefly, then release.</td>
                    <td>‚úÖ Reduces deadlock chance | ‚ùå May need multiple transactions</td>
                </tr>
                <tr>
                    <td><strong>üîç Auto Detection</strong></td>
                    <td>System detects and resolves deadlocks.</td>
                    <td>Database rolls back one transaction automatically.</td>
                    <td>‚úÖ Automatic | ‚ùå Some work lost</td>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- Real-World Examples -->
    <div class="demo-section" style="grid-column: 1 / -1;">
        <h2 class="demo-title">üåç Real-World Deadlock Examples</h2>
        <table class="comparison-table responsive-table">
            <thead>
                <tr>
                    <th>Scenario</th>
                    <th>Deadlock Situation</th>
                    <th>How It Happens</th>
                    <th>Solution</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>üè¶ Banking System</strong></td>
                    <td>Two accounts transferring funds.</td>
                    <td>Account A locks Account 1, Account B locks Account 2, each waits for the other.</td>
                    <td>Resource ordering‚Äîlock lower account number first.</td>
                </tr>
                <tr>
                    <td><strong>üõí E-commerce</strong></td>
                    <td>Inventory and order processing conflict.</td>
                    <td>Order locks product, inventory locks order table.</td>
                    <td>Short transactions, proper lock ordering.</td>
                </tr>
                <tr>
                    <td><strong>üì± Phone System</strong></td>
                    <td>Two calls connect simultaneously.</td>
                    <td>Call A dials B, Call B dials A at the same time.</td>
                    <td>Call queueing, timeout mechanism.</td>
                </tr>
                <tr>
                    <td><strong>üöó Traffic Intersection</strong></td>
                    <td>Cars block all paths.</td>
                    <td>All cars need to move forward but can't back up.</td>
                    <td>Traffic signals, roundabouts.</td>
                </tr>
                <tr>
                    <td><strong>üíª File System</strong></td>
                    <td>Two processes access files.</td>
                    <td>Process 1 locks File A, needs File B; Process 2 locks File B, needs File A.</td>
                    <td>File locking hierarchy, deadlock detection.</td>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- Pro Tips -->
    <div class="demo-section" style="grid-column: 1 / -1;">
        <h2 class="demo-title">üí° Pro Tips for Avoiding Deadlocks</h2>
        <div style="background: #e8f5e8; padding: 1rem; border-radius: 8px; margin: 1rem 0;">
            <ul>
                <li><strong>üîë Resource Ordering:</strong> Always acquire resources in a consistent order.</li>
                <li><strong>‚è∞ Use Timeouts:</strong> Set limits to prevent infinite waiting.</li>
                <li><strong>‚ö° Keep Transactions Short:</strong> Minimize lock duration to reduce conflicts.</li>
                <li><strong>üîç Enable Deadlock Detection:</strong> Let systems like databases handle conflicts automatically.</li>
            </ul>
            <div style="margin-top: 1rem; font-style: italic; color: #2d3748;">
                <strong>Pro Tip:</strong> "Break the deadlock cycle before it traps you!" üòÑ
            </div>
        </div>
    </div>
</div>

<script>
let simulationRunning = false;

// Deadlock demonstration functions
function demonstrateDeadlock() {
    const result = document.getElementById('deadlockResults');
    result.innerHTML = `
        <div class="error-message">
            <strong>üîí Classic Deadlock Scenario!</strong><br><br>
            <strong>The Setup:</strong><br>
            üë® Process 1: Holds Resource B, wants Resource A<br>
            üë®‚Äçü¶≤ Process 2: Holds Resource A, wants another resource<br>
            üë© Resource A: Held by Process 2, wanted by Process 1<br><br>
            <strong>Result:</strong><br>
            üîÑ Circular dependency‚Äîeveryone is waiting<br>
            ‚è∞ Time is wasted<br>
            üíª System hangs‚Äîno progress<br>
            üòµ Transactions stuck!<br><br>
            <strong>This is a Deadlock!</strong>
            <div class="message-time">${new Date().toLocaleTimeString()}</div>
        </div>
    `;
}

function demonstrateFourConditions() {
    const result = document.getElementById('deadlockResults');
    result.innerHTML = `
        <div class="success-message">
            <strong>4Ô∏è‚É£ Four Conditions of Deadlock (Coffman Conditions)</strong><br><br>
            <strong>1Ô∏è‚É£ Mutual Exclusion:</strong><br>
            ‚Ä¢ Only one process can use a resource at a time<br>
            ‚Ä¢ Example: Only one process can lock Resource A<br><br>
            <strong>2Ô∏è‚É£ Hold and Wait:</strong><br>
            ‚Ä¢ Holds resources while waiting for others<br>
            ‚Ä¢ Example: Process 1 holds Resource B, waits for Resource A<br><br>
            <strong>3Ô∏è‚É£ No Preemption:</strong><br>
            ‚Ä¢ Resources can't be forcefully taken<br>
            ‚Ä¢ Example: Process 2 won't release Resource A<br><br>
            <strong>4Ô∏è‚É£ Circular Wait:</strong><br>
            ‚Ä¢ Processes form a waiting cycle<br>
            ‚Ä¢ Example: Process 1 ‚Üí Process 2 ‚Üí Process 3 ‚Üí Process 1<br><br>
            <strong>All four conditions = Guaranteed Deadlock! üîí</strong>
            <div class="message-time">${new Date().toLocaleTimeString()}</div>
        </div>
    `;
}

function demonstratePrevention() {
    const result = document.getElementById('deadlockResults');
    result.innerHTML = `
        <div class="success-message">
            <strong>üõ°Ô∏è Deadlock Prevention Techniques</strong><br><br>
            <strong>1Ô∏è‚É£ Resource Ordering:</strong><br>
            ‚Ä¢ Always acquire resources in the same order<br>
            ‚Ä¢ Example: Lock Resource B before Resource A<br><br>
            <strong>2Ô∏è‚É£ Timeouts:</strong><br>
            ‚Ä¢ Cancel after waiting too long<br>
            ‚Ä¢ Example: Abort after 5 minutes<br><br>
            <strong>3Ô∏è‚É£ Short Transactions:</strong><br>
            ‚Ä¢ Finish tasks quickly<br>
            ‚Ä¢ Example: Release resources ASAP<br><br>
            <strong>4Ô∏è‚É£ Auto Detection:</strong><br>
            ‚Ä¢ System detects and resolves deadlocks<br>
            ‚Ä¢ Example: Database rolls back one transaction<br><br>
            <strong>Prevention is better than cure! üíä</strong>
            <div class="message-time">${new Date().toLocaleTimeString()}</div>
        </div>
    `;
}

function clearDeadlockDemo() {
    document.getElementById('deadlockResults').innerHTML = `
        <div class="event-message one-message">
            Click the buttons above to explore Deadlock concepts!
        </div>
    `;
}

// Simulation functions
function startDeadlockSimulation() {
    if (simulationRunning) return;
    simulationRunning = true;
    const btn = document.getElementById('simulationBtn');
    const resolveBtn = document.getElementById('resolveBtn');
    btn.disabled = true;
    btn.textContent = '‚è≥ Simulation Running...';
    // Step 1: Process 1 acquires Resource B
    setTimeout(() => {
        updateProcessStatus('process1', 'Has Resource B', 'success');
        updateResourceStatus('resource2', 'Owned by Process 1');
        logMessage('üîµ Process 1 acquired Resource B');
    }, 500);
    // Step 2: Process 2 acquires Resource A
    setTimeout(() => {
        updateProcessStatus('process2', 'Has Resource A', 'success');
        updateResourceStatus('resource1', 'Owned by Process 2');
        logMessage('üî¥ Process 2 acquired Resource A');
    }, 1000);
    // Step 3: Process 1 wants Resource A
    setTimeout(() => {
        updateProcessStatus('process1', 'Waiting for Resource A', 'waiting');
        logMessage('üîµ Process 1: Waiting for Resource A (held by Process 2)');
    }, 1500);
    // Step 4: Process 2 wants Resource B
    setTimeout(() => {
        updateProcessStatus('process2', 'Waiting for Resource B', 'waiting');
        logMessage('üî¥ Process 2: Waiting for Resource B (held by Process 1)');
    }, 2000);
    // Step 5: Deadlock detected!
    setTimeout(() => {
        logMessage('üö® DEADLOCK DETECTED! Circular wait condition met!');
        logMessage('üíÄ Both processes stuck‚Äîno progress possible!');
        resolveBtn.disabled = false;
    }, 2500);
}

function resolveDeadlock() {
    logMessage('üîß Resolving deadlock by terminating Process 2...');
    setTimeout(() => {
        updateProcessStatus('process2', 'Terminated (Rollback)', 'error');
        updateResourceStatus('resource1', 'Released');
        logMessage('üî¥ Process 2 transaction rolled back');
    }, 500);
    setTimeout(() => {
        updateProcessStatus('process1', 'Acquired both resources', 'success');
        updateResourceStatus('resource1', 'Owned by Process 1');
        logMessage('üîµ Process 1 acquired both resources!');
        logMessage('‚úÖ Deadlock resolved successfully!');
    }, 1000);
}

function resetSimulation() {
    simulationRunning = false;
    const btn = document.getElementById('simulationBtn');
    const resolveBtn = document.getElementById('resolveBtn');
    btn.disabled = false;
    btn.textContent = 'üöÄ Start Deadlock Simulation';
    resolveBtn.disabled = true;
    // Reset all statuses
    updateProcessStatus('process1', 'Ready', '');
    updateProcessStatus('process2', 'Ready', '');
    updateResourceStatus('resource1', 'Available');
    updateResourceStatus('resource2', 'Available');
    document.getElementById('simulationLog').innerHTML = 'Ready to simulate deadlock...';
}

function updateProcessStatus(processId, status, className) {
    const element = document.getElementById(processId);
    element.className = `memory-slot ${className}`;
    element.querySelector('.variable-value').textContent = status;
}

function updateResourceStatus(resourceId, status) {
    const element = document.getElementById(resourceId);
    element.querySelector('.variable-value').textContent = status;
}

function logMessage(message) {
    const log = document.getElementById('simulationLog');
    const timestamp = new Date().toLocaleTimeString();
    log.innerHTML += `<div>[${timestamp}] ${message}</div>`;
    log.scrollTop = log.scrollHeight;
}

// Condition testing functions
function testMutualExclusion() {
    document.getElementById('mutualExclusionResult').innerHTML = `
        <div class="success-message">
            <strong>üîê Mutual Exclusion Test Results:</strong><br><br>
            <strong>Scenario:</strong> Resource A with Process 2, Process 1 wants access<br><br>
            <div style="background: #2d3748; color: #e2e8f0; padding: 1rem; border-radius: 8px; margin: 0.5rem 0; font-family: monospace;">
Resource: Resource A<br>
Status: LOCKED by Process 2<br>
<br>
Process1.requestAccess() ‚Üí DENIED<br>
Reason: Mutual Exclusion - Only one at a time!<br>
Process 1 must wait until Process 2 releases resource.
            </div>
            <strong>‚úÖ Condition Met:</strong> Exclusive access enforced!
        </div>
    `;
}

function testHoldAndWait() {
    document.getElementById('holdAndWaitResult').innerHTML = `
        <div class="success-message">
            <strong>‚è≥ Hold and Wait Test Results:</strong><br><br>
            <strong>Current State:</strong><br>
            ‚Ä¢ Process 1: Holding Resource B ‚úì, Waiting for Resource A ‚è≥<br>
            ‚Ä¢ Process 2: Holding Resource A ‚úì, Waiting for another resource ‚è≥<br><br>
            <div style="background: #2d3748; color: #e2e8f0; padding: 1rem; border-radius: 8px; margin: 0.5rem 0; font-family: monospace;">
Process Status:<br>
Process 1: [HOLDING: Resource B] [WAITING: Resource A]<br>
Process 2: [HOLDING: Resource A] [WAITING: Other Resource]<br>
<br>
Both processes: ‚úì Holding resources ‚úì Waiting for more
            </div>
            <strong>‚úÖ Condition Met:</strong> Hold and Wait scenario active!
        </div>
    `;
}

function testNoPreemption() {
    document.getElementById('noPreemptionResult').innerHTML = `
        <div class="success-message">
            <strong>üö´ No Preemption Test Results:</strong><br><br>
            <strong>Attempt:</strong> Process 1 trying to forcefully take Resource A from Process 2<br><br>
            <div style="background: #2d3748; color: #e2e8f0; padding: 1rem; border-radius: 8px; margin: 0.5rem 0; font-family: monospace;">
System.forcePreempt(Resource A, from: Process 2, to: Process 1);<br>
<br>
ERROR: Preemption not allowed!<br>
Process 2: "I'll release it myself!"<br>
Process 1: "Must wait... üòû"<br>
<br>
Result: PREEMPTION FAILED
            </div>
            <strong>‚úÖ Condition Met:</strong> Resources cannot be forcefully taken!
        </div>
    `;
}

function testCircularWait() {
    document.getElementById('circularWaitResult').innerHTML = `
        <div class="success-message">
            <strong>üîÑ Circular Wait Test Results:</strong><br><br>
            <strong>Circular Dependency Chain Detected:</strong><br><br>
            <div style="background: #2d3748; color: #e2e8f0; padding: 1rem; border-radius: 8px; margin: 0.5rem 0; font-family: monospace;">
Dependency Chain Analysis:<br>
<br>
Process 1 ‚Üí (wants) ‚Üí Resource A ‚Üí (held by) ‚Üí Process 2<br>
Process 2 ‚Üí (wants) ‚Üí Resource C ‚Üí (held by) ‚Üí Process 3<br>
Process 3 ‚Üí (wants) ‚Üí Resource B ‚Üí (held by) ‚Üí Process 1<br>
<br>
CYCLE DETECTED: Process 1 ‚Üí Process 2 ‚Üí Process 3 ‚Üí Process 1<br>
<br>
Status: INFINITE CIRCULAR WAIT! üîÑ
            </div>
            <strong>‚úÖ Condition Met:</strong> Perfect circular wait scenario!<br>
            <strong>üíÄ Result:</strong> Deadlock inevitable!
        </div>
    `;
}

// Show condition tabs
function showCondition(condition) {
    const contents = document.querySelectorAll('.tab-content');
    contents.forEach(content => content.classList.remove('active'));
    const tabs = document.querySelectorAll('.tab');
    tabs.forEach(tab => tab.classList.remove('active'));
    document.getElementById(condition).classList.add('active');
    event.target.classList.add('active');
}

// Initialize demo
window.onload = function() {
    clearDeadlockDemo();
    resetSimulation();
};
</script>
</body>
</html>