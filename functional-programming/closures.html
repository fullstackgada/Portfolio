<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Closures Interactive Demo | FullstackGada</title>
  <meta name="description" content="Explore JavaScript Closures with our interactive demo! Learn closures, private variables, module patterns, event handlers, and real-world examples.">
  <meta name="author" content="FullstackGada">
  <meta name="robots" content="index, follow">

  <!-- Canonical -->
  <link rel="canonical" href="https://fullstackgada.netlify.app/functional-programming/closures">

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="/image/favicon.ico">

  <!-- Styles -->
  <link rel="stylesheet" href="/interactive-demo.css">
  <link rel="preload" href="/interactive-demo.css" as="style">

  <!-- Open Graph Tags -->
  <meta property="og:title" content="Closures Interactive Demo | FullstackGada">
  <meta property="og:description" content="Discover JavaScript Closures with an interactive demo! Learn private variables, module patterns, event handlers, and real-world examples.">
  <meta property="og:url" content="https://fullstackgada.netlify.app/functional-programming/closures">
  <meta property="og:type" content="article">
  <meta property="og:image" content="https://fullstackgada.netlify.app/functional-programming/images/closures.webp">

  <!-- Twitter Card Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Closures Interactive Demo | FullstackGada">
  <meta name="twitter:description" content="Learn JavaScript Closures with an interactive demo, covering private variables, module patterns, and event handlers.">
  <meta name="twitter:image" content="https://fullstackgada.netlify.app/functional-programming/images/closures.webp">

  <!-- Article Schema Markup -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Article",
    "headline": "Closures Interactive Demo",
    "description": "Explore JavaScript Closures with an interactive demo, covering private variables, module patterns, event handlers, and real-world examples.",
    "author": {
      "@type": "Person",
      "name": "FullstackGada"
    },
    "url": "https://fullstackgada.netlify.app/functional-programming/closures",
    "datePublished": "2025-09-23",
    "dateModified": "2025-09-23",
    "publisher": {
      "@type": "Organization",
      "name": "FullstackGada",
      "logo": {
        "@type": "ImageObject",
        "url": "https://fullstackgada.netlify.app/image/favicon.ico"
      }
    }
  }
  </script>

  <!-- FAQ Schema Markup -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "FAQPage",
    "mainEntity": [
      {
        "@type": "Question",
        "name": "What is a JavaScript Closure?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "A closure is a function that remembers the variables from its outer scope even after that scope has finished executing. It allows access to private variables and helps in data encapsulation."
        }
      },
      {
        "@type": "Question",
        "name": "Why are Closures important?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Closures are important because they allow data privacy, help create modular code, and enable advanced patterns like event handlers, callbacks, and functional programming techniques."
        }
      },
      {
        "@type": "Question",
        "name": "What are real-world examples of Closures?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Closures are commonly used in JavaScript for event handlers, callback functions, maintaining state in asynchronous code, and creating module patterns to encapsulate logic."
        }
      }
    ]
  }
  </script>
</head>

<body>
    <div class="container">
        <!-- Header Section -->
        <div class="header-interactive" style="position:relative;">
            <h1>Understanding Closures</h1>
            <p>Learn how JavaScript Closures work with FullstackGada‚Äôs interactive demo!</p>
            <div class="explore-diagrams-btn-wrapper">
                <a href="/interactive.html" class="explore-diagrams-btn">
                    <img src="/image/plus-circle.svg" alt="Explore more diagrams icon"> More Diagrams
                </a>
            </div>
            <div class="follow-btn-wrapper">
                <a href="https://www.instagram.com/fullstackgada" target="_blank" class="follow-btn">
                    <img src="/image/instagram.svg" alt="Instagram icon"> Follow for More
                </a>
            </div>
        </div>

        <!-- Demo Grid -->
        <div class="demo-grid">
            <!-- Closure Concept Explanation -->
            <div class="demo-section">
                <h2 class="demo-title">üíù What are Closures?</h2>
                <div class="explanation">
                    <strong>Closure:</strong> An inner function that retains access to its outer function‚Äôs variables, even after the outer function has finished executing!
                </div>

                <!-- Memory Analogy -->
                <div class="saree-analogy">
                    <h4>üíñ Memory Analogy</h4>
                    <div class="saree-step">
                        <div class="saree-emoji">üòç</div>
                        <div><strong>Seeing the Moment:</strong> A special memory (outer function).</div>
                    </div>
                    <div class="saree-step">
                        <div class="saree-emoji">üíù</div>
                        <div><strong>Stored Forever:</strong> The memory persists (closure) ‚Äì never forgotten!</div>
                    </div>
                    <div class="saree-step">
                        <div class="saree-emoji">üîí</div>
                        <div><strong>Private Access:</strong> Only accessible through the closure (lexical scope).</div>
                    </div>
                </div>

                <!-- Basic Closure Demo -->
                <div class="demo-controls">
                    <button class="demo-btn first-btn" onclick="demonstrateBasicClosure()" role="button" aria-label="Show Basic Closure Demo">
                        üíù Basic Closure Demo
                    </button>
                    <button class="demo-btn" onclick="demonstrateMultipleClosures()" role="button" aria-label="Show Multiple Closures Demo">
                        üë• Multiple Closures
                    </button>
                    <button class="demo-btn" onclick="demonstratePrivateVariables()" role="button" aria-label="Show Private Variables Demo">
                        üîí Private Variables
                    </button>
                    <button class="demo-btn clear-btn" onclick="clearClosureDemo()" role="button" aria-label="Clear Demo">
                        üóëÔ∏è Clear
                    </button>
                </div>

                <!-- Demo Results -->
                <div class="demo-area" id="closureResults">
                    <div class="event-message one-message">
                        Click the buttons above to see Closures in action!
                    </div>
                </div>
            </div>

            <!-- Interactive Counter Example -->
            <div class="demo-section">
                <h2 class="demo-title">üî¢ Private Counter with Closures</h2>
                <div class="explanation one-explanation">
                    <strong>Real Example:</strong> A counter with a private count variable that can‚Äôt be accessed directly!
                </div>

                <!-- Counter Display -->
                <div class="demo-area" id="counterDisplay">
                    <div class="event-message one-message">
                        <strong>üî¢ Compliment Counter</strong><br>
                        Current Count: <span id="currentCount">0</span><br>
                        <small>A new compliment for every action!</small>
                    </div>
                </div>

                <!-- Counter Controls -->
                <div class="demo-controls">
                    <button class="demo-btn first-btn" onclick="incrementCounter()" role="button" aria-label="Increment Counter">
                        üëó New Action = New Compliment
                    </button>
                    <button class="demo-btn" onclick="getCounterValue()" role="button" aria-label="Get Counter Value">
                        üìä View Count (Safe Access)
                    </button>
                    <button class="demo-btn" onclick="tryDirectAccess()" role="button" aria-label="Try Direct Access">
                        üö´ Try Direct Access (Will Fail!)
                    </button>
                    <button class="demo-btn clear-btn" onclick="resetCounter()" role="button" aria-label="Reset Counter">
                        üîÑ Reset Counter
                    </button>
                </div>

                <!-- Counter Code Display -->
                <div class="code-block" id="counterCode">
                    <div class="code-line comment">// Closure-based Private Counter</div>
                    <div class="code-line var-declaration">function createComplimentCounter() {</div>
                    <div class="code-line var-usage">  let count = 0; // Private variable - no external access</div>
                    <div class="code-line"></div>
                    <div class="code-line var-usage">  return function() { // Inner function (closure)</div>
                    <div class="code-line var-usage">    count++; // Accesses outer variable</div>
                    <div class="code-line var-usage">    return `Compliment #${count}: You look amazing!`;</div>
                    <div class="code-line var-usage">  };</div>
                    <div class="code-line var-declaration">}</div>
                    <div class="code-line"></div>
                    <div class="code-line var-assignment">const jethalalCompliments = createComplimentCounter();</div>
                </div>

                <!-- Counter Actions -->
                <div class="server-simulation">
                    <h4>Counter Actions Log:</h4>
                    <div class="server-log" id="counterLog">
                        Ready to count compliments...
                    </div>
                </div>
            </div>
        </div>

        <!-- Memory Visualization -->
        <div class="demo-section" style="grid-column: 1;">
            <h2 class="demo-title">üß† Memory Visualization: How Closures Work</h2>
            <div class="explanation">
                <strong>Step-by-Step:</strong> Understand how closures manage memory!
            </div>

            <div class="tabs">
                <button class="demo-btn active" onclick="showMemoryStep('memoryStep1')" role="button" aria-label="Show Step 1">1Ô∏è‚ÉùÔ∏è Function Created</button>
                <button class="demo-btn" onclick="showMemoryStep('memoryStep2')" role="button" aria-label="Show Step 2">2Ô∏è‚ÉùÔ∏è Function Called</button>
                <button class="demo-btn" onclick="showMemoryStep('memoryStep3')" role="button" aria-label="Show Step 3">3Ô∏è‚ÉùÔ∏è Inner Function Returned</button>
                <button class="demo-btn" onclick="showMemoryStep('memoryStep4')" role="button" aria-label="Show Step 4">4Ô∏è‚ÉùÔ∏è Outer Function Ends</button>
                <button class="demo-btn" onclick="showMemoryStep('memoryStep5')" role="button" aria-label="Show Step 5">5Ô∏è‚ÉùÔ∏è Closure Persists</button>
            </div>

            <!-- Memory Step 1 -->
            <div id="memoryStep1" class="tab-content active">
                <div class="memory-diagram">
                    <div class="memory-slot">
                        <div class="variable-name">üìù Code Definition</div>
                        <div class="variable-value">createCounter() defined in memory</div>
                    </div>
                    <div class="memory-slot">
                        <div class="variable-name">üèóÔ∏è Function Object</div>
                        <div class="variable-value">Function template ready, not yet executed</div>
                    </div>
                </div>
                <div class="explanation">
                    <strong>Step 1:</strong> Function is defined, no closure created yet.
                </div>
            </div>

            <!-- Memory Step 2 -->
            <div id="memoryStep2" class="tab-content">
                <div class="memory-diagram">
                    <div class="memory-slot">
                        <div class="variable-name">üöÄ Execution Context</div>
                        <div class="variable-value">createCounter() execution started</div>
                    </div>
                    <div class="memory-slot">
                        <div class="variable-name">üìä Local Variable</div>
                        <div class="variable-value">count = 0 created in function scope</div>
                    </div>
                    <div class="memory-slot">
                        <div class="variable-name">üèóÔ∏è Inner Function</div>
                        <div class="variable-value">Anonymous function being created</div>
                    </div>
                </div>
                <div class="explanation">
                    <strong>Step 2:</strong> Outer function is executing, local variables are created.
                </div>
            </div>

            <!-- Memory Step 3 -->
            <div id="memoryStep3" class="tab-content">
                <div class="memory-diagram">
                    <div class="memory-slot">
                        <div class="variable-name">‚Ü©Ô∏è Return Value</div>
                        <div class="variable-value">Inner function returned as value</div>
                    </div>
                    <div class="memory-slot hoisted">
                        <div class="variable-name">üîó Lexical Scope</div>
                        <div class="variable-value">Inner function retains outer scope</div>
                    </div>
                    <div class="memory-slot hoisted">
                        <div class="variable-name">üíù Closure Created</div>
                        <div class="variable-value">count variable captured by inner function</div>
                    </div>
                </div>
                <div class="explanation">
                    <strong>Step 3:</strong> Inner function returned, closure created! Variables are captured.
                </div>
            </div>

            <!-- Memory Step 4 -->
            <div id="memoryStep4" class="tab-content">
                <div class="memory-diagram">
                    <div class="memory-slot error">
                        <div class="variable-name">‚ùå Outer Context</div>
                        <div class="variable-value">createCounter() execution ended</div>
                    </div>
                    <div class="memory-slot">
                        <div class="variable-name">üì± Variable Reference</div>
                        <div class="variable-value">jethalalCounter holds returned function</div>
                    </div>
                    <div class="memory-slot hoisted">
                        <div class="variable-name">üîí Preserved Scope</div>
                        <div class="variable-value">count still accessible via closure</div>
                    </div>
                </div>
                <div class="explanation">
                    <strong>Step 4:</strong> Outer function ends, but variables persist through the closure!
                </div>
            </div>

            <!-- Memory Step 5 -->
            <div id="memoryStep5" class="tab-content">
                <div class="memory-diagram">
                    <div class="memory-slot hoisted">
                        <div class="variable-name">üéØ Active Closure</div>
                        <div class="variable-value">jethalalCounter() can access count</div>
                    </div>
                    <div class="memory-slot hoisted">
                        <div class="variable-name">üî¢ Private Data</div>
                        <div class="variable-value">count = 5 (after multiple calls)</div>
                    </div>
                    <div class="memory-slot hoisted">
                        <div class="variable-name">üîê Encapsulation</div>
                        <div class="variable-value">count not accessible externally</div>
                    </div>
                </div>
                <div class="explanation">
                    <strong>Step 5:</strong> Closure fully active! Private variables accessible only via closure.
                </div>
            </div>
        </div>

        <!-- Code Examples Section -->
        <div class="demo-section" style="grid-column: 1 / -1;">
            <h2 class="demo-title">üíª Practical Closure Examples</h2>
            <div class="tabs">
                <button class="tab active" onclick="showClosureExample('basic')" role="button" aria-label="Show Basic Closure">üéØ Basic Closure</button>
                <button class="tab" onclick="showClosureExample('private-data')" role="button" aria-label="Show Private Data">üîí Private Data</button>
                <button class="tab" onclick="showClosureExample('module-pattern')" role="button" aria-label="Show Module Pattern">üì¶ Module Pattern</button>
                <button class="tab" onclick="showClosureExample('event-handlers')" role="button" aria-label="Show Event Handlers">üé™ Event Handlers</button>
            </div>

            <!-- Basic Closure Example -->
            <div id="basic" class="tab-content active">
                <div class="code-container">
                    <div class="code-block">
                        <div class="code-line comment">// üéØ Basic Closure Example</div>
                        <div class="code-line var-declaration">function outerFunction(name) {</div>
                        <div class="code-line var-usage">  const greeting = "Hello"; // Outer variable</div>
                        <div class="code-line"></div>
                        <div class="code-line var-usage">  function innerFunction() { // Inner function</div>
                        <div class="code-line var-usage">    return greeting + " " + name + "!"; // Accesses outer variables</div>
                        <div class="code-line var-usage">  }</div>
                        <div class="code-line"></div>
                        <div class="code-line var-usage">  return innerFunction; // Returns inner function</div>
                        <div class="code-line var-declaration">}</div>
                        <div class="code-line"></div>
                        <div class="code-line comment">// Usage</div>
                        <div class="code-line var-assignment">const babitaGreeter = outerFunction("Babita");</div>
                        <div class="code-line var-usage">console.log(babitaGreeter()); // "Hello Babita!"</div>
                        <div class="code-line"></div>
                        <div class="code-line comment">// Closure retains 'name' and 'greeting' even after outer function ends</div>
                    </div>
                    <div class="code-block">
                        <div class="code-line comment">// üîÑ Multiple Closures from One Function</div>
                        <div class="code-line var-assignment">const jethalal = outerFunction("Jethalal");</div>
                        <div class="code-line var-assignment">const bhide = outerFunction("Bhide");</div>
                        <div class="code-line var-assignment">const popatlal = outerFunction("Popatlal");</div>
                        <div class="code-line"></div>
                        <div class="code-line var-usage">console.log(jethalal());  // "Hello Jethalal!"</div>
                        <div class="code-line var-usage">console.log(bhide());     // "Hello Bhide!"</div>
                        <div class="code-line var-usage">console.log(popatlal()); // "Hello Popatlal!"</div>
                        <div class="code-line"></div>
                        <div class="code-line comment">// Each closure maintains its own variable copy!</div>
                    </div>
                </div>
                <button class="demo-btn first-btn" onclick="testBasicClosure()" role="button" aria-label="Test Basic Closure">üéØ Test Basic Closure</button>
                <div id="basicClosureResult" class="result-panel" style="margin-top: 1rem;">
                    <div class="result-content">Click to test basic closure...</div>
                </div>
            </div>

            <!-- Private Data Example -->
            <div id="private-data" class="tab-content">
                <div class="code-container">
                    <div class="code-block">
                        <div class="code-line comment">// üîí Private Data with Closures</div>
                        <div class="code-line var-declaration">function createBankAccount(initialBalance) {</div>
                        <div class="code-line var-usage">  let balance = initialBalance; // Private variable</div>
                        <div class="code-line"></div>
                        <div class="code-line var-usage">  return {</div>
                        <div class="code-line var-usage">    deposit: function(amount) {</div>
                        <div class="code-line var-usage">      balance += amount;</div>
                        <div class="code-line var-usage">      return `Deposited $${amount}. New balance: $${balance}`;</div>
                        <div class="code-line var-usage">    },</div>
                        <div class="code-line"></div>
                        <div class="code-line var-usage">    withdraw: function(amount) {</div>
                        <div class="code-line var-usage">      if (amount <= balance) {</div>
                        <div class="code-line var-usage">        balance -= amount;</div>
                        <div class="code-line var-usage">        return `Withdrew $${amount}. New balance: $${balance}`;</div>
                        <div class="code-line var-usage">      }</div>
                        <div class="code-line var-usage">      return "Insufficient funds!";</div>
                        <div class="code-line var-usage">    },</div>
                        <div class="code-line"></div>
                        <div class="code-line var-usage">    getBalance: function() {</div>
                        <div class="code-line var-usage">      return `Current balance: $${balance}`;</div>
                        <div class="code-line var-usage">    }</div>
                        <div class="code-line var-usage">  };</div>
                        <div class="code-line var-declaration">}</div>
                    </div>
                    <div class="code-block">
                        <div class="code-line comment">// Usage - Private data protection</div>
                        <div class="code-line var-assignment">const jethalalsAccount = createBankAccount(50000);</div>
                        <div class="code-line"></div>
                        <div class="code-line var-usage">console.log(jethalalsAccount.deposit(10000));</div>
                        <div class="code-line var-usage">console.log(jethalalsAccount.withdraw(5000));</div>
                        <div class="code-line var-usage">console.log(jethalalsAccount.getBalance());</div>
                        <div class="code-line"></div>
                        <div class="code-line error">// ‚ùå No direct access to private variable</div>
                        <div class="code-line error">console.log(jethalalsAccount.balance); // undefined</div>
                        <div class="code-line"></div>
                        <div class="code-line comment">// ‚úÖ Access only through provided methods</div>
                    </div>
                </div>
                <button class="demo-btn first-btn" onclick="testPrivateData()" role="button" aria-label="Test Private Data">üîí Test Private Data</button>
                <div id="privateDataResult" class="result-panel" style="margin-top: 1rem;">
                    <div class="result-content">Click to test private data...</div>
                </div>
            </div>

            <!-- Module Pattern Example -->
            <div id="module-pattern" class="tab-content">
                <div class="code-container">
                    <div class="code-block">
                        <div class="code-line comment">// üì¶ Module Pattern with Closures</div>
                        <div class="code-line var-declaration">const GokuldhamSociety = (function() {</div>
                        <div class="code-line var-usage">  // Private variables</div>
                        <div class="code-line var-usage">  let residents = [];</div>
                        <div class="code-line var-usage">  let societyFunds = 100000;</div>
                        <div class="code-line var-usage">  const secretCode = "TMKOC2024";</div>
                        <div class="code-line"></div>
                        <div class="code-line var-usage">  // Private functions</div>
                        <div class="code-line var-usage">  function validateResident(name) {</div>
                        <div class="code-line var-usage">    return name && name.length > 0;</div>
                        <div class="code-line var-usage">  }</div>
                        <div class="code-line"></div>
                        <div class="code-line var-usage">  // Public API (returned object)</div>
                        <div class="code-line var-usage">  return {</div>
                        <div class="code-line var-usage">    addResident: function(name) {</div>
                        <div class="code-line var-usage">      if (validateResident(name)) {</div>
                        <div class="code-line var-usage">        residents.push(name);</div>
                        <div class="code-line var-usage">        return `${name} added to society!`;</div>
                        <div class="code-line var-usage">      }</div>
                        <div class="code-line var-usage">      return "Invalid resident name!";</div>
                        <div class="code-line var-usage">    },</div>
                        <div class="code-line"></div>
                        <div class="code-line var-usage">    getResidents: function() {</div>
                        <div class="code-line var-usage">      return [...residents]; // Returns copy, not original</div>
                        <div class="code-line var-usage">    },</div>
                        <div class="code-line"></div>
                        <div class="code-line var-usage">    collectFunds: function(amount) {</div>
                        <div class="code-line var-usage">      societyFunds += amount;</div>
                        <div class="code-line var-usage">      return `Collected $${amount}. Total funds: $${societyFunds}`;</div>
                        <div class="code-line var-usage">    }</div>
                        <div class="code-line var-usage">  };</div>
                        <div class="code-line var-declaration">})(); // IIFE - Immediately Invoked Function Expression</div>
                    </div>
                    <div class="code-block">
                        <div class="code-line comment">// Usage - Encapsulated module</div>
                        <div class="code-line var-usage">console.log(GokuldhamSociety.addResident("Jethalal"));</div>
                        <div class="code-line var-usage">console.log(GokuldhamSociety.addResident("Babita"));</div>
                        <div class="code-line var-usage">console.log(GokuldhamSociety.getResidents());</div>
                        <div class="code-line var-usage">console.log(GokuldhamSociety.collectFunds(5000));</div>
                        <div class="code-line"></div>
                        <div class="code-line error">// ‚ùå No access to private data</div>
                        <div class="code-line error">console.log(GokuldhamSociety.residents);     // undefined</div>
                        <div class="code-line error">console.log(GokuldhamSociety.societyFunds);  // undefined</div>
                        <div class="code-line error">console.log(GokuldhamSociety.secretCode);    // undefined</div>
                    </div>
                </div>
                <button class="demo-btn first-btn" onclick="testModulePattern()" role="button" aria-label="Test Module Pattern">üì¶ Test Module Pattern</button>
                <div id="modulePatternResult" class="result-panel" style="margin-top: 1rem;">
                    <div class="result-content">Click to test module pattern...</div>
                </div>
            </div>

            <!-- Event Handlers Example -->
            <div id="event-handlers" class="tab-content">
                <div class="code-container">
                    <div class="code-block">
                        <div class="code-line comment">// üé™ Closures in Event Handlers (Common Pattern)</div>
                        <div class="code-line var-declaration">function setupEventHandlers() {</div>
                        <div class="code-line var-usage">  const buttons = document.querySelectorAll('.demo-btn');</div>
                        <div class="code-line"></div>
                        <div class="code-line var-usage">  for (let i = 0; i < buttons.length; i++) {</div>
                        <div class="code-line var-usage">    const button = buttons[i];</div>
                        <div class="code-line"></div>
                        <div class="code-line var-usage">    // Closure captures 'button' and 'i'</div>
                        <div class="code-line var-usage">    button.addEventListener('click', function() {</div>
                        <div class="code-line var-usage">      console.log(`Button ${i + 1} clicked!`);</div>
                        <div class="code-line var-usage">      console.log('Button text:', button.textContent);</div>
                        <div class="code-line var-usage">    });</div>
                        <div class="code-line var-usage">  }</div>
                        <div class="code-line var-declaration">}</div>
                    </div>
                    <div class="code-block">
                        <div class="code-line comment">// üîÑ Creating Multiple Event Handlers with Closures</div>
                        <div class="code-line var-declaration">function createClickHandler(message, count) {</div>
                        <div class="code-line var-usage">  let clickCount = 0; // Private per handler</div>
                        <div class="code-line"></div>
                        <div class="code-line var-usage">  return function(event) {</div>
                        <div class="code-line var-usage">    clickCount++;</div>
                        <div class="code-line var-usage">    console.log(`${message} - Click #${clickCount}`);</div>
                        <div class="code-line"></div>
                        <div class="code-line var-usage">    if (clickCount >= count) {</div>
                        <div class="code-line var-usage">      console.log("Maximum clicks reached!");</div>
                        <div class="code-line var-usage">      event.target.disabled = true;</div>
                        <div class="code-line var-usage">    }</div>
                        <div class="code-line var-usage">  };</div>
                        <div class="code-line var-declaration">}</div>
                        <div class="code-line"></div>
                        <div class="code-line comment">// Usage</div>
                        <div class="code-line var-assignment">const handler1 = createClickHandler("Button 1", 3);</div>
                        <div class="code-line var-assignment">const handler2 = createClickHandler("Button 2", 5);</div>
                        <div class="code-line"></div>
                        <div class="code-line var-usage">button1.addEventListener('click', handler1);</div>
                        <div class="code-line var-usage">button2.addEventListener('click', handler2);</div>
                    </div>
                </div>
                <button class="demo-btn first-btn" onclick="testEventHandlers()" role="button" aria-label="Test Event Handlers">üé™ Test Event Handlers</button>
                <div id="eventHandlersResult" class="result-panel" style="margin-top: 1rem;">
                    <div class="result-content">Click to test event handlers...</div>
                </div>
            </div>
        </div>

        <!-- Memory Management & Best Practices -->
        <div class="comparison-section">
            <h3>üéØ Closures: Benefits, Challenges, and Best Practices</h3>
            <table class="comparison-table responsive-table">
                <thead>
                    <tr>
                        <th>Aspect</th>
                        <th>‚úÖ Benefits</th>
                        <th>‚ö†Ô∏è Potential Challenges</th>
                        <th>üí° Best Practices</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Data Privacy</strong></td>
                        <td>Encapsulated variables, no global pollution</td>
                        <td>Unintended variable capture</td>
                        <td>Capture only necessary variables, avoid large objects</td>
                    </tr>
                    <tr>
                        <td><strong>Memory</strong></td>
                        <td>Persistent state without global variables</td>
                        <td>Memory leaks if not cleaned up</td>
                        <td>Remove event listeners, nullify references when done</td>
                    </tr>
                    <tr>
                        <td><strong>Function Factory</strong></td>
                        <td>Create customized functions dynamically</td>
                        <td>Each call creates a new closure (memory cost)</td>
                        <td>Reuse closures where possible, avoid in loops</td>
                    </tr>
                    <tr>
                        <td><strong>Event Handling</strong></td>
                        <td>Preserves context and state in handlers</td>
                        <td>Common source of DOM memory leaks</td>
                        <td>Use weak references, remove listeners on cleanup</td>
                    </tr>
                    <tr>
                        <td><strong>Module Pattern</strong></td>
                        <td>Clean API with private implementation</td>
                        <td>Possible circular references</td>
                        <td>Use IIFE pattern, avoid deep nesting</td>
                    </tr>
                    <tr>
                        <td><strong>Debugging</strong></td>
                        <td>Isolated scope, clear variable access</td>
                        <td>Hard to inspect private variables</td>
                        <td>Add debug methods, use meaningful names</td>
                    </tr>
                    <tr>
                        <td><strong>Fun Analogy</strong></td>
                        <td>Like cherished memories ‚Äì safe and private</td>
                        <td>Too many memories fill up space ‚Äì let go of unused ones!</td>
                        <td>Keep essential data, discard the rest</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Real-world Use Cases -->
        <div class="comparison-section">
            <h3>üåç Real-World Uses of Closures</h3>
            <table class="comparison-table responsive-table">
                <thead>
                    <tr>
                        <th>Use Case</th>
                        <th>Example</th>
                        <th>Why Closures?</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>üéØ Event Handlers</strong></td>
                        <td>Button clicks, form submissions</td>
                        <td>Preserves context and state between events</td>
                    </tr>
                    <tr>
                        <td><strong>üîí Private Variables</strong></td>
                        <td>API keys, configuration, internal state</td>
                        <td>Hides implementation details from external access</td>
                    </tr>
                    <tr>
                        <td><strong>üè≠ Function Factories</strong></td>
                        <td>Validators, formatters, calculators</td>
                        <td>Creates specialized functions with preset parameters</td>
                    </tr>
                    <tr>
                        <td><strong>üì¶ Module Pattern</strong></td>
                        <td>Libraries, frameworks, utility modules</td>
                        <td>Provides public API while keeping internals private</td>
                    </tr>
                    <tr>
                        <td><strong>üîÑ Callbacks & Async</strong></td>
                        <td>setTimeout, AJAX, Promise handlers</td>
                        <td>Accesses outer scope variables in async operations</td>
                    </tr>
                    <tr>
                        <td><strong>üéÆ Game State</strong></td>
                        <td>Player stats, game configuration</td>
                        <td>Maintains persistent state without globals</td>
                    </tr>
                    <tr>
                        <td><strong>üìä Data Processing</strong></td>
                        <td>Currying, partial application</td>
                        <td>Builds reusable data transformation pipelines</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <script>
        let complimentCounter = null;
        let counterValue = 0;

        // Create the actual counter using closure
        function createComplimentCounter() {
            let count = 0;
            return function() {
                count++;
                return `Compliment #${count}: You look amazing!`;
            };
        }

        // Initialize counter
        function initializeCounter() {
            complimentCounter = createComplimentCounter();
            counterValue = 0;
            updateCounterDisplay();
        }

        // Update counter display
        function updateCounterDisplay() {
            document.getElementById('currentCount').textContent = counterValue;
        }

        // Demonstrate basic closure
        function demonstrateBasicClosure() {
            const result = document.getElementById('closureResults');
            function createMemory(memory) {
                return function() {
                    return `üíù Memory recalled: "${memory}"`;
                };
            }
            const babitaMemory = createMemory("A beautiful smile");
            const smileMemory = createMemory("First meeting");
            result.innerHTML = `
                <div class="success-message">
                    <strong>üíù Basic Closure Demo - Memory Palace!</strong><br><br>
                    <strong>Closure 1:</strong><br>
                    ${babitaMemory()}<br><br>
                    <strong>Closure 2:</strong><br>
                    ${smileMemory()}<br><br>
                    <strong>Key Points:</strong><br>
                    ‚úÖ Inner functions retain outer variables<br>
                    ‚úÖ Each closure has its own memory<br>
                    ‚úÖ Data persists after outer function ends
                    <div class="message-time">${new Date().toLocaleTimeString()}</div>
                </div>
            `;
        }

        // Demonstrate multiple closures
        function demonstrateMultipleClosures() {
            const result = document.getElementById('closureResults');
            function createCharacterGreeter(character) {
                let greetCount = 0;
                return function() {
                    greetCount++;
                    return `${character} said hello ${greetCount} times!`;
                };
            }
            const jethalalGreeter = createCharacterGreeter("Jethalal");
            const bhideGreeter = createCharacterGreeter("Bhide");
            const jethalalResults = [jethalalGreeter(), jethalalGreeter(), jethalalGreeter()];
            const bhideResults = [bhideGreeter(), bhideGreeter()];
            result.innerHTML = `
                <div class="success-message">
                    <strong>üë• Multiple Closures Demo!</strong><br><br>
                    <strong>Jethalal's Closure:</strong><br>
                    ${jethalalResults.map(result => `‚Ä¢ ${result}`).join('<br>')}<br><br>
                    <strong>Bhide's Closure:</strong><br>
                    ${bhideResults.map(result => `‚Ä¢ ${result}`).join('<br>')}<br><br>
                    <strong>Key Points:</strong><br>
                    ‚úÖ Each closure maintains its own counter<br>
                    ‚úÖ Independent despite same function origin<br>
                    ‚úÖ Separate memory allocation
                    <div class="message-time">${new Date().toLocaleTimeString()}</div>
                </div>
            `;
        }

        // Demonstrate private variables
        function demonstratePrivateVariables() {
            const result = document.getElementById('closureResults');
            function createSecretKeeper(secret) {
                let accessCount = 0;
                return {
                    revealSecret: function() {
                        accessCount++;
                        if (accessCount <= 3) {
                            return `ü§´ Secret revealed (${accessCount}/3): "${secret}"`;
                        } else {
                            return "üö´ Secret locked! Too many attempts.";
                        }
                    },
                    getAttempts: function() {
                        return `üî¢ Access attempts: ${accessCount}`;
                    }
                };
            }
            const jethalalsSecret = createSecretKeeper("I have a secret crush");
            const attempts = [
                jethalalsSecret.revealSecret(),
                jethalalsSecret.revealSecret(),
                jethalalsSecret.revealSecret(),
                jethalalsSecret.revealSecret(),
                jethalalsSecret.getAttempts()
            ];
            result.innerHTML = `
                <div class="success-message">
                    <strong>üîí Private Variables Demo!</strong><br><br>
                    ${attempts.map(attempt => `‚Ä¢ ${attempt}`).join('<br>')}<br><br>
                    <strong>Security Features:</strong><br>
                    ‚úÖ Secret variable not accessible externally<br>
                    ‚úÖ Access count is private<br>
                    ‚úÖ Access only via provided methods<br>
                    ‚úÖ Internal logic protected
                    <div class="message-time">${new Date().toLocaleTimeString()}</div>
                </div>
            `;
        }

        // Clear closure demo
        function clearClosureDemo() {
            document.getElementById('closureResults').innerHTML = `
                <div class="event-message one-message">
                    Click the buttons above to see Closures in action!
                </div>
            `;
        }

        // Counter functions
        function incrementCounter() {
            if (!complimentCounter) {
                initializeCounter();
            }
            const compliment = complimentCounter();
            counterValue++;
            updateCounterDisplay();
            document.getElementById('counterLog').innerHTML = `
                <strong style="color: #4caf50;">‚ú® New Compliment Added!</strong><br>
                ${compliment}<br>
                <strong>Counter State:</strong> ${counterValue}<br>
                <small>Closure safely incremented the count</small>
            `;
        }

        function getCounterValue() {
            document.getElementById('counterLog').innerHTML = `
                <strong style="color: #356cc7;">üìä Safe Access Method</strong><br>
                Current Count: ${counterValue}<br>
                <strong>Access Method:</strong> Only via closure function<br>
                <small>No direct variable access ‚Äì closure security!</small>
            `;
        }

        function tryDirectAccess() {
            document.getElementById('counterLog').innerHTML = `
                <strong style="color: #f56565;">üö´ Direct Access Failed!</strong><br>
                <code>console.log(complimentCounter.count); // undefined</code><br>
                <strong>Error:</strong> count variable is private!<br>
                <strong>Lesson:</strong> Closure variables can't be accessed directly<br>
                <small>This is the power of closure security!</small>
            `;
        }

        function resetCounter() {
            initializeCounter();
            document.getElementById('counterLog').innerHTML = `
                <strong style="color: #356cc7;">üîÑ Counter Reset</strong><br>
                New closure created, fresh count = 0<br>
                Previous closure memory cleared<br>
                <small>Example of memory management!</small>
            `;
        }

        // Memory step visualization
        function showMemoryStep(step) {
            const contents = document.querySelectorAll('.tab-content');
            contents.forEach(content => content.classList.remove('active'));
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => tab.classList.remove('active'));
            document.getElementById(step).classList.add('active');
            event.target.classList.add('active');
        }

        // Code example tests
        function testBasicClosure() {
            function outerFunction(name) {
                const greeting = "Hello";
                function innerFunction() {
                    return greeting + " " + name + "!";
                }
                return innerFunction;
            }
            const babitaGreeter = outerFunction("Babita");
            const jethalalGreeter = outerFunction("Jethalal");
            document.getElementById('basicClosureResult').innerHTML = `
                <div class="success-message">
                    <strong>üéØ Basic Closure Test Results:</strong><br>
                    ‚Ä¢ babitaGreeter(): ${babitaGreeter()}<br>
                    ‚Ä¢ jethalalGreeter(): ${jethalalGreeter()}<br>
                    ‚Ä¢ babitaGreeter(): ${babitaGreeter()} (same result!)<br><br>
                    <strong>Observations:</strong><br>
                    ‚úÖ Each closure maintains its own variable copy<br>
                    ‚úÖ Functions retain their lexical scope<br>
                    ‚úÖ Results are consistent and predictable
                </div>
            `;
        }

        function testPrivateData() {
            function createBankAccount(initialBalance) {
                let balance = initialBalance;
                return {
                    deposit: function(amount) {
                        balance += amount;
                        return `Deposited $${amount}. New balance: $${balance}`;
                    },
                    withdraw: function(amount) {
                        if (amount <= balance) {
                            balance -= amount;
                            return `Withdrew $${amount}. New balance: $${balance}`;
                        }
                        return "Insufficient funds!";
                    },
                    getBalance: function() {
                        return `Current balance: $${balance}`;
                    }
                };
            }
            const account = createBankAccount(50000);
            const results = [
                account.getBalance(),
                account.deposit(10000),
                account.withdraw(5000),
                account.getBalance()
            ];
            document.getElementById('privateDataResult').innerHTML = `
                <div class="success-message">
                    <strong>üîí Private Data Test Results:</strong><br>
                    ${results.map(result => `‚Ä¢ ${result}`).join('<br>')}<br><br>
                    <strong>Security Check:</strong><br>
                    ‚Ä¢ account.balance = ${typeof account.balance} (undefined - private!)<br>
                    ‚Ä¢ Direct access blocked ‚úÖ<br>
                    ‚Ä¢ Access only via methods ‚úÖ
                </div>
            `;
        }

        function testModulePattern() {
            const results = [
                "Jethalal added to society!",
                "Babita added to society!",
                "Residents: Jethalal, Babita",
                "Collected $5000. Total funds: $105000"
            ];
            document.getElementById('modulePatternResult').innerHTML = `
                <div class="success-message">
                    <strong>üì¶ Module Pattern Test Results:</strong><br>
                    ${results.map(result => `‚Ä¢ ${result}`).join('<br>')}<br><br>
                    <strong>Encapsulation Check:</strong><br>
                    ‚Ä¢ Private residents array: Not accessible ‚úÖ<br>
                    ‚Ä¢ Private societyFunds: Not accessible ‚úÖ<br>
                    ‚Ä¢ Private secretCode: Not accessible ‚úÖ<br>
                    ‚Ä¢ Only public API available ‚úÖ
                </div>
            `;
        }

        function testEventHandlers() {
            document.getElementById('eventHandlersResult').innerHTML = `
                <div class="success-message">
                    <strong>üé™ Event Handlers Test:</strong><br><br>
                    <strong>Simulated Results:</strong><br>
                    ‚Ä¢ Button 1 clicked! (Click #1)<br>
                    ‚Ä¢ Button 1 clicked! (Click #2)<br>
                    ‚Ä¢ Button 2 clicked! (Click #1)<br>
                    ‚Ä¢ Button 1 clicked! (Click #3) - Maximum clicks reached!<br><br>
                    <strong>Closure Benefits:</strong><br>
                    ‚úÖ Separate click count per handler<br>
                    ‚úÖ Event context preserved<br>
                    ‚úÖ Private state per handler<br>
                    ‚úÖ Clean separation of concerns
                </div>
            `;
        }

        // Initialize demo
        window.onload = function() {
            initializeCounter();
            clearClosureDemo();
        };
    </script>
</body>
</html>